#coding=utf-8
#Non-UTF-8 code starting with '\xe5' in file cmbc.py on line 22, but no encoding declared; see http://python.org/dev/peps/pep-0263/ for details
import requests


from pyquery import PyQuery as pq
import csv
import time
import random
import codecs

from urllib import parse
import json






# 获取一页的数据
def getPageData():


    datatxt = '[{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"滨湖新区天山路与洞庭湖路交叉口","bankname":"滨湖支行","bankid":"ATM1025643","posy":"+0000.000000","banktype":"1","posx":"+0000.000000","areano":"","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"||||","address":"合肥市亳(bo)州路135号天庆大厦一楼，庐阳区政府对面","bankname":"庐阳支行","bankid":"ATM1041164","posy":"+0117.263857","banktype":"1","posx":"+0031.878508","areano":"340103","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24小时||||","address":"合肥市望江西路666号科大讯飞公司A2行政楼一层","bankname":"科大讯飞自助银行","bankid":"ATM1032865","posy":"+0117.311364","banktype":"1","posx":"+0031.900384","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"24小时||||","address":"滨湖区天山355号","bankname":"合肥滨湖新区天山路合家福自助银行","bankid":"ATM1032861","posy":"+0117.296696","banktype":"1","posx":"+0031.737424","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"江东大道与马濮路交叉口","bankname":"江东大道支行","bankid":"ATM1025166","posy":"+0118.519177","banktype":"1","posx":"+0031.732771","areano":"","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市上城国际新城玫瑰苑1幢商106、107室","bankname":"合肥上城国际社区银行","bankid":"ATM1023302","posy":"+0117.282900","banktype":"1","posx":"+0031.892299","areano":"340103","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"包河大道与祁门路交叉口南100米","bankname":"合肥滨湖春天社区银行","bankid":"ATM1023303","posy":"+0117.303633","banktype":"1","posx":"+0031.812717","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市包河区望江路与宁国路交口","bankname":"合肥太宁花园社区银行","bankid":"ATM1023305","posy":"+0117.292241","banktype":"1","posx":"+0031.828334","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市南一环与曙光路交口曙光路69号创景花园3栋商业102","bankname":"合肥创景花园社区银行","bankid":"ATM1023307","posy":"+0117.275524","banktype":"1","posx":"+0031.844051","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市包河区桐城南路太湖路北100M","bankname":"江南新里程社区银行","bankid":"ATM1023309","posy":"+0117.274173","banktype":"1","posx":"+0031.832236","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥瑶海区北二环与龙门领路交口","bankname":"合肥中兴西湖花园社区银行","bankid":"ATM1023310","posy":"+0117.324127","banktype":"1","posx":"+0031.899481","areano":"340105","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市凤台路与嘉山路交口向东150米利港银河新城S3-104-204室","bankname":"合肥利港银河新城社区银行","bankid":"ATM1023311","posy":"+0117.293878","banktype":"1","posx":"+0031.894203","areano":"340105","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"望江西路与岳西路交口向南50米","bankname":"合肥华地新街社区银行","bankid":"ATM1023320","posy":"+0117.223962","banktype":"1","posx":"+0031.841149","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"蜀山区东至路与贵池路交口向东100米巷内小区北门","bankname":"合肥领势公馆社区银行","bankid":"ATM1023321","posy":"+0117.245478","banktype":"1","posx":"+0031.845666","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"贵池路和岳西路交口","bankname":"合肥汉嘉都市森林社区银行","bankid":"ATM1023322","posy":"+0117.225173","banktype":"1","posx":"+0031.845194","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"湖光东路168号科学家园4号楼一层","bankname":"合肥科学家园社区银行","bankid":"ATM1023323","posy":"+0117.174282","banktype":"1","posx":"+0031.863699","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市蜀山区怀宁路与黄山路交口向北100米","bankname":"合肥百协大溪地社区银行","bankid":"ATM1023325","posy":"+0117.260205","banktype":"1","posx":"+0031.840725","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"24H||||","address":"合肥市蜀山区望江西路198号信旺华府骏苑5幢商120室","bankname":"合肥望江西路大唐国际购物广场自助银行","bankid":"ATM1023330","posy":"+0117.232366","banktype":"1","posx":"+0031.830990","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市蜀山区习友路与潜山路交口","bankname":"琥珀五环城社区银行","bankid":"ATM1023332","posy":"+0117.232542","banktype":"1","posx":"+0031.798216","areano":"","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市政务区习友路与祁门路交汇处","bankname":"合肥发能太阳海岸小区金融便民店","bankid":"ATM1023334","posy":"+0117.231636","banktype":"1","posx":"+0031.808269","areano":"","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24h||||","address":"合肥市黄山路绿城桂花园雨苑1号商铺前三间","bankname":"合肥绿城桂花园小区金融便民店","bankid":"ATM1023335","posy":"+0117.197645","banktype":"1","posx":"+0031.837608","areano":"","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24h||||","address":"合肥市香樟大道澜溪镇花园2栋106室","bankname":"合肥澜溪镇小区金融便民店","bankid":"ATM1023336","posy":"+0117.193990","banktype":"1","posx":"+0031.834852","areano":"","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市经开区芙蓉路南、翡翠路西翠微苑二期4栋116室","bankname":"合肥翠微苑社区银行","bankid":"ATM1023314","posy":"+0117.865857","banktype":"1","posx":"+0031.503947","areano":"340106","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"明光路与和平路交口小区商业街中段","bankname":"合肥和平盛世社区银行","bankid":"ATM1023337","posy":"+0106.746291","banktype":"1","posx":"+0025.428867","areano":"340102","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市包河区1号孝肃桥东侧","bankname":"合肥御景湾社区银行","bankid":"ATM1023338","posy":"+0117.303976","banktype":"1","posx":"+0031.858805","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市铜陵路与合裕路交口","bankname":"合肥宝业城市绿苑社区银行","bankid":"ATM1023339","posy":"+0117.317904","banktype":"1","posx":"+0031.851634","areano":"340102","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥市肥西县巢湖路与新华街交叉口","bankname":"肥西支行","bankid":"ATM1023340","posy":"+0117.168998","banktype":"1","posx":"+0031.723136","areano":"340123","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"合肥潜山路与皖和路交口","bankname":"潜山路支行","bankid":"ATM1025057","posy":"+0000.000000","banktype":"1","posx":"+0000.000000","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24H||||","address":"肥东县店埠镇公园路北侧星光国际广场3-S2一、二层民生银行肥东支行","bankname":"肥东支行","bankid":"ATM1025703","posy":"+0000.000000","banktype":"1","posx":"+0000.000000","areano":"340122","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"24小时||||","address":"合肥市瑶海区长江东路85号长江市场A区1#门西01号门面","bankname":"长江东路批发市场自助","bankid":"ATM1020038","posy":"+0117.364636","banktype":"1","posx":"+0031.867807","areano":"340102","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"24小时||||","address":"合肥市亳(bo)州路135号天庆大厦一楼，庐阳区政府对面","bankname":"合肥分行营业部","bankid":"ATM1020040","posy":"+0117.283042","banktype":"1","posx":"+0031.861190","areano":"340103","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助存取款机","banktel":"","time":"24小时||||","address":"瑶海区铜陵路路（街）169号  ","bankname":"铜陵路自助    ","bankid":"ATM1000356","posy":"+0117.816576","banktype":"1","posx":"+0030.929935","areano":"340102","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助存取款机","banktel":"","time":"24小时||||","address":"瑶海区区临泉路路（街）9号  ","bankname":"五金大市场自助","bankid":"ATM1000354","posy":"+0115.261688","banktype":"1","posx":"+0033.062698","areano":"340102","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助存取款机","banktel":"","time":"24小时||||","address":"包河区区马鞍山路（街）506号","bankname":"马鞍山路自助  ","bankid":"ATM1000353","posy":"+0117.301281","banktype":"1","posx":"+0031.839611","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"24小时||||","address":"合肥市马鞍山南路429号","bankname":"马鞍山路支行","bankid":"ATM1020037","posy":"+0117.300884","banktype":"1","posx":"+0031.841076","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,自助查询机,存取款一体机","banktel":"","time":"24小时||||","address":"蜀山区区黄山路路（街）616号，黄山路与天柱路交口","bankname":"高新区支行","bankid":"ATM1020056","posy":"+0117.199497","banktype":"1","posx":"+0031.848725","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,自助查询机,存取款一体机","banktel":"","time":"24小时||||","address":"合肥市望江东路39号，省立儿童医院大门旁","bankname":"望江路支行","bankid":"ATM1020043","posy":"+0117.280579","banktype":"1","posx":"+0031.827769","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"24小时||||","address":"包河区区屯溪路（街）235号，合肥屯溪路与徽州大道交口","bankname":"屯溪路支行","bankid":"ATM1020047","posy":"+0117.287125","banktype":"1","posx":"+0031.839580","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,自助查询机,存取款一体机","banktel":"","time":"24小时||||","address":"合肥市站前路白马三期（宝文商务大厦）旅游汽车站斜对面","bankname":"白马支行","bankid":"ATM1020049","posy":"+0117.309052","banktype":"1","posx":"+0031.886486","areano":"340105","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,自助查询机,存取款一体机","banktel":"","time":"24小时||||","address":"莲花路和丹霞路交口","bankname":"经开区支行","bankid":"ATM1020050","posy":"+0117.231277","banktype":"1","posx":"+0031.765339","areano":"340106","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"自助取款机,存取款一体机","banktel":"","time":"24小时||||","address":"合肥市蜀山区环湖东路398号黄山路沃尔玛超市旁","bankname":"黄山路沃尔玛自助银行","bankid":"ATM1020055","posy":"+0117.215177","banktype":"1","posx":"+0031.840173","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"","time":"24小时||||","address":"合工大翡翠湖校区八号楼公寓西段","bankname":"合肥工大新区自助银行","bankid":"ATM1025793","posy":"+0000.000000","banktype":"1","posx":"+0000.000000","areano":"340104","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"存取款一体机","banktel":"","time":"24小时||||","address":"合肥市红星路91号锦信大厦","bankname":"合肥红星路锦信大厦自助银行","bankid":"ATM1025800","posy":"+0117.293144","banktype":"1","posx":"+0031.865177","areano":"340103","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"","time":"24小时||||","address":"滨湖新区玉龙路与林芝路交口书香门第商业街10#楼102商铺","bankname":"合肥书香门第","bankid":"ATM1033905","posy":"+0117.278213","banktype":"1","posx":"+0031.728620","areano":"340111","traficroute":"","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-65525117       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 休息;周日 08:30-17:00","address":"合肥市祁门路1718号,合肥市祁门路1718号天鹅湖购物中心B-商101","bankname":"合肥政务区支行","bankid":"3404      ","posy":"+0117.211804","banktype":"0","posx":"+0031.809694","areano":"340103","traficroute":"13、20、32、41、103、128、162等","bak1":"1"},{"cityno":"340100","atmtype":"","banktel":"0551-63779250       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 休息;周日 08:30-17:00","address":"安徽省合肥市包河区马鞍山南路429号创智广场6幢1层3-101室","bankname":"合肥马鞍山路支行","bankid":"3409      ","posy":"+0117.301513","banktype":"0","posx":"+0031.827612","areano":"340111","traficroute":"坐51、902、99路五里冲站下车","bak1":"1"},{"cityno":"340100","atmtype":"","banktel":"0551-65307973       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00;周日休息","address":"安徽省合肥市黄山路616号（黄山路与天柱路交叉口）","bankname":"合肥高新区支行","bankid":"3408      ","posy":"+0117.113900","banktype":"0","posx":"+0031.503200","areano":"340104","traficroute":"坐48、10站桂花园下","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-82320385       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00，周日 08:30-17:00","address":"安徽省巢湖市东塘路与团结路交口东方国际大厦一楼","bankname":"巢湖支行","bankid":"3410      ","posy":"+0117.881116","banktype":"0","posx":"+0031.598758","areano":"340181","traficroute":"坐16路、18路民生银行站下车","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-68236600       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00;周日 08:30-17:00","address":"安徽省合肥市肥西县上派镇新华街4号","bankname":"合肥肥西支行","bankid":"3411      ","posy":"+0117.172154","banktype":"0","posx":"+0031.720362","areano":"340123","traficroute":"坐33路到派河大桥站下再往南走300米","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-65973255       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 休息;周日 08:30-17:00","address":"安徽省合肥市蜀山区潜山路与皖河路交口新华国际广场A座裙楼1-2层","bankname":"合肥潜山路支行","bankid":"3412      ","posy":"+0117.231897","banktype":"0","posx":"+0031.835987","areano":"340104","traficroute":"坐129、502、8路轻机场站下车","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-62892550       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 休息;周日 08:30-17:00","address":"合肥市亳（bo）州路135号天庆大厦一层,庐阳区政府对面","bankname":"中国民生银行股份有限公司合肥庐阳支行","bankid":"3407      ","posy":"+0117.263857","banktype":"0","posx":"+0031.878508","areano":"340103","traficroute":"106、138、125、14、12、22路等","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-64562060       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 休息;周日 08:30-17:00","address":"滨湖新区天山路与洞庭湖路交叉口","bankname":"中国民生银行合肥滨湖支行","bankid":"3413      ","posy":"+0117.303659","banktype":"0","posx":"+0031.740205","areano":"340111","traficroute":"60路","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-67722006       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00，周日 08:30-17:00","address":"合肥市肥东县店埠镇公园路北侧星光国际广场3-S2一、二层","bankname":"中国民生银行肥东支行","bankid":"3414      ","posy":"+0117.473487","banktype":"0","posx":"+0031.892919","areano":"340122","traficroute":"353、354路","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-87011051       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00，周日 08:30-17:00","address":"合肥市庐江县周瑜大道与汤池路交口鸿悦公馆一楼","bankname":"中国民生银行庐江支行","bankid":"3416      ","posy":"+0117.276448","banktype":"0","posx":"+0031.255505","areano":"340100","traficroute":"1路","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-63802800       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00;周日休息","address":"合肥市经济技术开发区莲花路与丹霞路交口名筑花园29栋","bankname":"合肥经开区支行","bankid":"3405      ","posy":"+0117.231502","banktype":"0","posx":"+0031.765384","areano":"340104","traficroute":"坐148、601、605至丹霞路下车","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-64635670       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00;周日休息","address":"安徽省合肥市屯溪路253号","bankname":"合肥屯溪路支行","bankid":"3406      ","posy":"+0117.284967","banktype":"0","posx":"+0031.847662","areano":"340111","traficroute":"坐21路、51路、122路、226路到南熏门桥站下车；坐4路、14路、116路、117路、118路、121路、129路、150路、235路、703路到屯溪路站下车","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-65907850       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00;周日休息","address":"合肥市芜湖西路与金寨路交口银保大厦，稻香楼旁边，光大银行斜对面","bankname":"合肥分行营业部","bankid":"3401      ","posy":"+0117.273690","banktype":"0","posx":"+0031.849820","areano":"340104","traficroute":"1、6、30路等","bak1":"1"},{"cityno":"340100","atmtype":"","banktel":"0551-64208551       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 休息;周日 08:30-17:00","address":"安徽省合肥市站前路宝文商务大厦一楼","bankname":"合肥白马支行　","bankid":"3403      ","posy":"+0117.311796","banktype":"0","posx":"+0031.884961","areano":"340102","traficroute":"坐1、10、11、22、101、111、119、801路中绿广场下","bak1":"0"},{"cityno":"340100","atmtype":"","banktel":"0551-63481255       ","time":"08:30-17:00||08:30-12:00,14:00-17:00||周六 08:30-17:00;周日休息","address":"安徽省合肥市包河区望江东路39号（安徽省儿童医院旁）","bankname":"合肥望江路支行","bankid":"3402      ","posy":"+0117.281024","banktype":"0","posx":"+0031.828262","areano":"340111","traficroute":"坐8、108、111、134、163路卫岗站下","bak1":"0"}]'


    
    data = json.loads(datatxt)
  




   
    return data

# 保存到csv文件。乱码处理
def toFile(bankData):
    # print(bankData)
    f = codecs.open('cmbc.csv','w','utf_8_sig')
    writer = csv.writer(f)
    writer.writerow(['网点名称', '网点地址', '电话','Longitude','Latitude'])
   
    # 遍历字典
    for bank in bankData:
        writer.writerow([bank.get('bankname'), bank.get('address'), bank.get('banktel'),bank.get('posy'),bank.get('posx')])
    f.close()
                  
    

def init():
   
    pageData = getPageData()
    toFile(pageData)

init()


